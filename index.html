<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scale=no, target-densitydpi=medium-dpi">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>grayblue</title>
	<link rel="stylesheet" type="text/css" href="css/common.css">
</head>

<body>
<div class="wrapper">
	<ul class="nav">
		<li><a href="#intro" title="Next Section"></a></li>
		<li><a href="#second" title="Next Section"></a></li>
		<li><a href="#third" title="Next Section"></a></li>
		<li><a href="#fifth" title="Next Section"></a></li>
	</ul>

	<!-- 첫째 영역 -->
	<div id="intro" class="parallax-box slide-area">
		<div class="slide-box box1"></div>
		<div class="slide-box box2"></div>
		<div class="slide-box box3"></div>
		<div class="slide-box box4"></div>
	</div>

	<!-- 두번째 영역 -->
	<div id="second" class="parallax-box">
		<div class="bg"></div>
	</div>

	<!-- 세번째 영역 -->
	<div id="third" class="parallax-box">

	</div>

	<!-- 다섯번째 영역 -->
	<div id="fifth" class="parallax-box">

	</div>
</div>

<!-- Script -->
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<script type="text/javascript" src="js/jquery.parallax-1.1.3.js"></script>
<script type="text/javascript" src="js/jquery.localscroll-1.2.7-min.js"></script>
<script type="text/javascript" src="js/jquery.scrollTo-1.4.2-min.js"></script>
<script>
$(window).load(function(){
	$('.nav').localScroll(500);

	$('#intro .slide-box').parallax("50%", 0.3);
	$('#second').parallax("50%", 0.3);
	$('#third').parallax("50%", 0.3);
	$('#second .bg').parallax("50%", 0.4);

	$(window).scroll(function(){
		var winScroll = $(window).scrollTop();
		var $direct=$('.parallax-box');
		$direct.each(function(index){
			$directOffset=$direct.eq(index).offset().top - 300;
			if (winScroll >= $directOffset) {
				$('.nav li').eq(index).addClass('on').siblings().removeClass('on');
			}
		});

		//마지막 컨텐츠
		if(winScroll == $(document).height()-$(window).height()){
			$('.nav li:last-child').addClass('on').siblings().removeClass('on');
		}
	});
	$(window).scroll();// 윈도우 로딩 시 스크롤 호출



	$('.slide-area').each(function(){
		var boxLen = $(this).find('.slide-box').length;
		if(boxLen >= 2){
			$(this).append('<button type="button" class="btn-prev">이전</button><button type="button" class="btn-next">다음</button>');
		}
	});

	$('.slide-box').each(function(){
		var idx = $(this).index();
		var boxW = $(this).outerWidth();
		$(this).css({'left':boxW*idx});
	});

	/*
	var pgVar = 0;
	$(document).on('click', '.slide-area button', function(){
		if($(this).hasClass('btn-next')){
			if(pgVar < boxLen){
				pgVar++;
				$(this).find('.slide-box').animate({'left':'-=100%'},300);
			};
		} else {
			if(pgVar > 0){
				pgVar--;
				$(this).find('.slide-box').animate({'left':'+=100%'},300);
			};
		};
	});
	*/
});
</script>

</body>
</html>
